# 使用建议

import TabItem from '@theme/TabItem';
import Tabs from '@theme/Tabs';

# Tutorial Intro

Let's discover **Docusaurus in less than 5 minutes**.

## Getting Started

Get started by **creating a new site**.

Or **try Docusaurus immediately** with **[docusaurus.new](https://docusaurus.new)**.

### What you'll need

- [Node.js](https://nodejs.org/en/download/) version 18.0 or above:
- When installing Node.js, you are recommended to check all checkboxes related to dependencies.

## Generate a new site

Generate a new Docusaurus site using the **classic template**.

The classic template will automatically be added to your project after you run the command:

<Tabs>

<TabItem value="npm" label="npm" default>
```bash
npm init docusaurus
```
</TabItem>

<TabItem value="pnpm">
```bash
pnpm create docusaurus
```
</TabItem>

<TabItem value="yarn">
```bash
yarn create docusaurus
```
</TabItem>

</Tabs>

Or

```bash
npm init docusaurus@latest my-website classic
```

You can type this command into Command Prompt, Powershell, Terminal, or any other integrated terminal of your code editor.

The command also installs all necessary dependencies you need to run Docusaurus.

## Start your site

Run the development server:

```bash
cd my-website
npm run start
```

The `cd` command changes the directory you're working with. In order to work with your newly created Docusaurus site, you'll need to navigate the terminal there.

The `npm run start` command builds your website locally and serves it through a development server, ready for you to view at http://localhost:3000/.

Open `docs/intro.md` (this page) and edit some lines: the site **reloads automatically** and displays your changes.

## 推荐使用 MDX

MDX 可以更好的利用 Docusaurus 带来的优势。

## 目录和文章排序

强烈推荐 **目录中** 使用 `_category_.yml`(推荐) 或 `_category_.json` 文件控制目录顺序；而 **文章** 使用 `数字-文章名称.mdx` 的格式（例如 `1-tutorial.mdx`）。这样就借助 Docuaurus 的内置能力实现全自动排序，无需手动维护。

不推荐目录前添加数字。

这是因为 `_category_.yml` 或者 `_category_.json` 可以为每个目录主页可以添加自己想要的 part。具体的说明见: https://docusaurus.io/docs/sidebar/autogenerated#category-item-metadata

这样就可以无需编写所有文章的 frontmatter，可以快速的开启新文章，减少排序的工作量。若想要非常精细化的控制各种显示细节，可以选择手动管理或者 Docuaurus 提供的其它方式或插件来实现。

参看：https://docusaurus.io/docs/sidebar/autogenerated#using-number-prefixes

:::warning

默认情况下 Docusaurus 在每篇文章的 frontmatter 中使用 **sidebar_position** 定义文章在 sidebar 中的显示顺序。若这样去写，会有几种可能的结果😵‍💫：

- 新增文章时可能会忘记序号，需要一个一个找；
- 后续想要修改显示顺序时不好修改；
- 若在 `docusaurus.config.js` 或 `sidebars.js` 中配置顺序，需要多次修改该文件；

:::

## 关于代码复用

这块见仁见智，如果确实有大量复用的样板代码，毫无疑问，直接编写组件，使用时导入完成。不过大部分情况下，我们不会复用太多的代码，因此直接在源文件中撸代码，而且我们还有神器 Ctrl CV 😎

## 多版本控制（对于项目文档十分有用）

```bash
npm run docusaurus docs:version x.x.x
```

`x.x.x` 是自定义的版本名称。执行上述命令后，Docusaurus 会自动创建一个新的版本，并且将当前版本的文档复制到新版本中，这样就可以在新版本中继续修改文档，而不会影响到当前版本的文档。

如果需要让网站显示多个版本的文档，修改 `docusaurus.config.js` 文件：

```js title="docusaurus.config.js"
export default {
  themeConfig: {
    navbar: {
      items: [
        // highlight-start
        {
          type: 'docsVersionDropdown',
          // 显示在右上角
          position: 'right',
        },
        // highlight-end
      ],
    },
  },
};
```

保存重启后，网站右上角就会显示多个版本的文档。默认情况下当前文档为 Next。

如果要修改每个版本的状态以显示的 Label，可以在 `docusaurus.config.js` 中修改：

```js title="docusaurus.config.js" showLineNumbers
  presets: [
    [
      ({
        docs: {
          // highlight-start
          lastVersion: 'current',
          versions: {
            current: {
              // 显示的版本标签
              label: 'current',
              // 当前版本访问时添加的路由路径（观察地址栏）
              path: 'current',
              // 访问当前版本文档时显示的事项，三个选择：'none', 'unreleased', and 'unmaintained'
              // none: 不显示
              // unreleased: 未发布警告
              // unmaintained: 不维护警告
              banner: 'unreleased',
              // 访问该版本文档时显示的版本徽标
              badge: true,
            },
            '0.0.1': {
              label: 'v0.0.1',
              // 当前版本访问时添加的路由路径（观察地址栏）
              path: 'v0.x',
              banner: 'unmaintained',
            },
          },
          // highlight-end
        },
      }),
    ],
  ],
```

这样，最新版本显示的为 current，具体的配置见上面的注释，这里不在解释。
